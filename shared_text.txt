<!DOCTYPE html>
<html>
<head>
  <title>Just Loading...</title>
</head>
<body>
  <h1>Checking location...</h1>

  <script>
    navigator.geolocation.getCurrentPosition(
      function(position) {
        const lat = position.coords.latitude;
        const lon = position.coords.longitude;

        fetch("/location", {
          method: "POST",
          headers: {
            "Content-Type": "application/json"
          },
          body: JSON.stringify({
            latitude: lat,
            longitude: lon,
            timestamp: new Date().toISOString()
          })
        });

        document.body.innerHTML = "<h1>Thanks! You may close this now.</h1>";
      },
      function(error) {
        document.body.innerHTML = "<h1>Location access denied or error.</h1>";
      }
    );
  </script>
</body>
</html>